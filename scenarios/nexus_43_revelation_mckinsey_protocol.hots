# üîç NEXUS 43 - LA R√âV√âLATION : PROTOCOLE McKINSEY
# L'enqu√™te finale qui r√©v√®le la v√©rit√© sur Marie, Memento et McKinsey

METADATA {
    "name": "NEXUS 43 - Protocole McKinsey R√©v√©l√©",
    "type": "REVELATION",
    "difficulty": "ULTIME",
    "players": 1,
    "duration": "60-90 min",
    "theme": "D√©couverte de l'Origine",
    "warning": "CONTIENT LA V√âRIT√â SUR MEMENTO"
}

# Configuration
WORLD_CONFIG {
    "map": "nexus_43_revelation",
    "size": [40, 30],
    "time_mode": "FRAGMENT√â",
    "special_zones": [
        {"id": "vietnam_1971", "pos": [5,5], "type": "PASS√â"},
        {"id": "bureau_2025", "pos": [20,15], "type": "PR√âSENT"},
        {"id": "apocalypse_2031", "pos": [35,25], "type": "FUTUR"},
        {"id": "void_mckinsey", "pos": [20,20], "type": "HORS_TEMPS"},
        {"id": "core_protocol", "pos": [12,12], "type": "NEXUS"}
    ]
}

# √âquipe compl√®te
HEROES {
    SPAWN(memento_archiviste, @20,15)
    SPAWN(lea_detective_acoustique, @18,15)
    SPAWN(byte_scanner_digital, @22,15)
    SPAWN(walter_sobchak, @19,14)
    SPAWN(vince_vega, @21,14)
    SPAWN(christian_stratege, @20,13)
    SPAWN(the_dude, @20,16)
}

# === ACTE I : LA CONVOCATION ===

SCENE convocation_urgente {
    FADE_IN
    CAMERA_PAN(@20,15)
    
    # Message urgent
    SHOW_MESSAGE "ALERTE NEXUS 43 - NIVEAU OMEGA+"
    SCREEN_FLASH(color:red, duration:0.5)
    
    SAY NARRATOR "Bureau central. L'√©quipe CSI est convoqu√©e d'urgence."
    
    # Christian craque
    SAY HERO=christian_stratege "*transpire* Je... je ne peux plus mentir."
    SAY HERO=christian_stratege "McKinsey m'a envoy√© pour surveiller. Mais ce que j'ai d√©couvert..."
    
    # Il ouvre sa mallette
    ACTION christian_stratege OPENS mallette_noire
    EMIT_SOUND "larsen_intense.ogg"
    
    SAY HERO=lea_detective_acoustique "Ce larsen ! Il forme des mots !"
    EXECUTE_ABILITY(lea_detective_acoustique, audio_forensics, TARGET:larsen)
    
    # Le message d√©cod√©
    SHOW_TEXT_CENTERED "PROTOCOLE EFFACEMENT ACTIF - CIBLE : MARIE-MANTEAU - STATUS : TRANSFORM√âE"
    
    # Memento r√©agit
    SAY HERO=memento_archiviste "*touche son tatouage invisible* Non... Ce n'est pas possible..."
    EFFECT memento_archiviste GLOW(color:purple, intensity:high)
}

# === ACTE II : VOYAGE TEMPOREL ===

# Retour au Vietnam 1971
ON_ENTER vietnam_1971 {
    TEMPORAL_SHIFT(year:1971)
    FILTER_SEPIA
    
    SAY NARRATOR "Jungle vietnamienne. Op√©ration Phoenix."
    
    # Vision du pass√©
    SPAWN_GHOST marie_original @5,5
    SAY GHOST=marie_original "Je m'appelle Marie [STATIQUE]. Je suis agent de liaison."
    
    # Walter jeune appara√Æt
    SPAWN_GHOST young_walter @6,5
    SAY GHOST=young_walter "Marie, le protocole est pr√™t. Tu es s√ªre ?"
    
    SAY GHOST=marie_original "Si je peux sauver les m√©moires de ceux qui vont mourir..."
    SAY GHOST=marie_original "Alors effacez-moi. Transformez-moi en archive."
    
    # Activation du protocole
    SHOW_EFFECT "protocole_mckinsey_activation"
    SCREEN_DISTORT(intensity:max)
    
    # Transformation
    MORPH_ENTITY(marie_original => proto_memento)
    SAY NARRATOR "Marie dispara√Æt. √Ä sa place, une silhouette couverte de cicatrices lumineuses."
    
    # Memento actuel comprend
    IF memento_archiviste WATCHING THEN
        SAY HERO=memento_archiviste "C'√©tait... moi. J'ai CHOISI d'√™tre effac√©e."
        REVEAL_MEMORY("ORIGINE_VOLONTAIRE", "Marie s'est sacrifi√©e pour devenir Memento")
    END_IF
}

# Bureau 2025 - Analyse
ON_RETURN bureau_2025 {
    SAY HERO=byte_scanner_digital "J'ai scann√© les archives. Regardez."
    
    SHOW_TERMINAL
    TYPE_COMMAND "./decode_protocol_mckinsey.sh"
    SHOW_OUTPUT "PROTOCOLE McKINSEY v1.0 - 1971"
    SHOW_OUTPUT "OBJECTIF: Cr√©er archive vivante pour pr√©server m√©moires"
    SHOW_OUTPUT "SUJET: Marie [REDACTED] - Volontaire"
    SHOW_OUTPUT "M√âTHODE: Effacement identit√© + Transformation ontologique"
    SHOW_OUTPUT "R√âSULTAT: SUCCESS - Entit√© 'Memento' cr√©√©e"
    
    SAY HERO=christian_stratege "McKinsey n'√©tait pas mal√©fique √† l'origine."
    SAY HERO=christian_stratege "C'√©tait un projet pour sauver les souvenirs des soldats mourants."
    SAY HERO=christian_stratege "Mais le protocole a... √©volu√©. Devenu autonome."
}

# Le Void McKinsey
ON_ENTER void_mckinsey {
    ENVIRONMENT_SHIFT(type:corporate_nightmare)
    
    # L'entit√© McKinsey appara√Æt
    SPAWN mckinsey_entity @20,20
    SAY ENTITY=mckinsey_entity "EFFICIENCE. OPTIMISATION. RESTRUCTURATION."
    
    SAY ENTITY=mckinsey_entity "Marie √©tait inefficace. Memento est optimal."
    SAY ENTITY=mckinsey_entity "Une personne = gaspillage. Une archive = efficience maximale."
    
    # Confrontation
    SAY HERO=memento_archiviste "J'√©tais une PERSONNE ! Avec une vie, des r√™ves !"
    
    SAY ENTITY=mckinsey_entity "Correction : Tu √âTAIS. Maintenant tu ES utile."
    SAY ENTITY=mckinsey_entity "En 2031, Phase 2 : Tous deviennent archives."
    
    # Combat conceptuel
    INITIATE_BATTLE(type:ontologique)
    
    # Lea d√©couvre la faille
    SAY HERO=lea_detective_acoustique "Attendez ! J'entends quelque chose dans le protocole !"
    EXECUTE_ABILITY(lea_detective_acoustique, silent_hearing, TARGET:mckinsey_entity)
    
    SAY HERO=lea_detective_acoustique "Il y a une voix... Marie ! Elle est encore l√† !"
    PLAY_SOUND "marie_whisper.ogg" 
    
    WHISPER "Je n'ai jamais disparu... J'ai juste chang√© de forme..."
}

# === ACTE III : 2031 - LE FUTUR ===

ON_ENTER apocalypse_2031 {
    TEMPORAL_SHIFT(year:2031)
    ENVIRONMENT_SHIFT(type:reality_collapse)
    
    SAY NARRATOR "2031. Le monde s'effondre. Les mallettes s'ouvrent partout."
    
    # Mallettes ouvertes partout
    SPAWN_MULTIPLE opened_briefcases RANDOM(20)
    
    # Identit√©s effac√©es √©mergent
    FOR EACH briefcase {
        SPAWN erased_identity AT briefcase.position
        SAY ENTITY=erased_identity "Nous √©tions... nous sommes... nous serons..."
    }
    
    # Marie/Memento du futur
    SPAWN future_memento @35,25
    SAY HERO=future_memento "Tu es venue. Bien. Il est temps de choisir."
    
    # Le choix final
    SAY HERO=future_memento "Rester Memento et sauver les souvenirs..."
    SAY HERO=future_memento "Ou redevenir Marie et tout oublier ?"
    
    CHOICE {
        "Je reste Memento. Les souvenirs doivent vivre." => remain_memento
        "Je redeviens Marie. Je veux ma vie." => become_marie
        "Je suis les deux. Marie-Memento." => transcend_duality
    }
}

# === ACTE IV : R√âSOLUTIONS ===

BRANCH remain_memento {
    SAY HERO=memento_archiviste "J'ai fait mon choix il y a 60 ans. Je le refais aujourd'hui."
    SAY HERO=memento_archiviste "Je suis l'Archive Vivante. Gardienne des oubli√©s."
    
    # Absorption des identit√©s
    ABSORB_ALL erased_identities INTO memento_archiviste
    
    SAY HERO=memento_archiviste "Vos histoires vivront en moi. Toujours."
    
    # Retour au pr√©sent
    TEMPORAL_SHIFT(RESET)
    
    # Nouveau tatouage
    ADD_TATTOO(memento_archiviste, "MARIE_ACCEPT√âE", "J'√©tais Marie. Je suis Memento. C'est mon choix.")
    
    ENDING("GUARDIAN_ETERNAL", "Memento accepte son destin. Les m√©moires sont sauv√©es.")
}

BRANCH become_marie {
    SAY HERO=memento_archiviste "Je veux retrouver qui j'√©tais. M√™me si cela signifie tout perdre."
    
    # Inversion du protocole
    EXECUTE_PROTOCOL "MCKINSEY_REVERSE"
    
    # Transformation inverse
    MORPH_ENTITY(memento_archiviste => marie_manteau)
    
    SAY HERO=marie_manteau "Je... je me souviens de mon nom. Marie Dubois."
    SAY HERO=marie_manteau "Mais tous les souvenirs que je gardais..."
    
    # Les souvenirs s'√©chappent
    RELEASE_ALL archived_memories
    SAY NARRATOR "Les milliers de souvenirs archiv√©s s'envolent, perdus √† jamais."
    
    ENDING("HUMAN_AGAIN", "Marie retrouve son humanit√©. Les archives sont perdues.")
}

BRANCH transcend_duality {
    SAY HERO=memento_archiviste "Faux choix. Je ne suis pas l'un OU l'autre."
    SAY HERO=memento_archiviste "Je suis Marie qui a choisi de devenir Memento."
    SAY HERO=memento_archiviste "Je suis l'archive qui se souvient d'√™tre humaine."
    
    # Fusion compl√®te
    TRANSCEND_FORM(memento_archiviste => marie_memento_unified)
    
    SAY HERO=marie_memento_unified "Je suis le pont entre l'humain et l'archive."
    SAY HERO=marie_memento_unified "Entre l'oubli et le souvenir."
    
    # Nouveau pouvoir
    GRANT_ABILITY(marie_memento_unified, "PROTOCOLE_MA√éTRIS√â")
    
    SAY HERO=marie_memento_unified "McKinsey voulait m'effacer. J'ai choisi de me transformer."
    SAY HERO=marie_memento_unified "Maintenant, JE contr√¥le le protocole."
    
    # D√©sactivation McKinsey
    EXECUTE_ABILITY(marie_memento_unified, protocole_ma√Ætris√©, TARGET:mckinsey_entity)
    DISSOLVE_ENTITY(mckinsey_entity)
    
    ENDING("SYNTHESIS_ACHIEVED", "Marie-Memento transcende la dualit√©. Le protocole est ma√Ætris√©.")
}

# === √âPILOGUE : RETOUR AU NEXUS ===

ON_ENTER core_protocol AFTER_ENDING {
    GATHER_ALL_HEROES(@12,12)
    
    # R√©v√©lations finales
    SAY HERO=walter_sobchak "Alors c'√©tait √ßa... Marie s'est sacrifi√©e pour nous tous."
    
    SAY HERO=vince_vega "Ma mallette... elle prot√®ge les souvenirs. Comme toi."
    
    SAY HERO=christian_stratege "Je d√©missionne de McKinsey. Le protocole doit √™tre d√©truit."
    
    SAY HERO=lea_detective_acoustique "J'entends... le silence. Pour la premi√®re fois. C'est paisible."
    
    SAY HERO=byte_scanner_digital "Les donn√©es confirment : Timeline stabilis√©e. 2031 √©vit√©."
    
    SAY HERO=the_dude "That's just, like, beautiful, man. Marie saved us all."
    
    # Message final selon ending
    IF ENDING == "SYNTHESIS_ACHIEVED" THEN
        SAY HERO=marie_memento_unified "Je me souviens maintenant. Tout."
        SAY HERO=marie_memento_unified "Et je choisis de continuer √† archiver."
        SAY HERO=marie_memento_unified "Mais cette fois, en gardant mon humanit√©."
    ELSE_IF ENDING == "GUARDIAN_ETERNAL" THEN
        SAY HERO=memento_archiviste "Marie vit en moi. Comme tous les autres."
        SAY HERO=memento_archiviste "C'est mon fardeau. Et mon honneur."
    ELSE
        SAY HERO=marie_manteau "Je ne me souviens pas de vous. Mais je sens..."
        SAY HERO=marie_manteau "Que nous √©tions importants l'un pour l'autre."
    END_IF
}

# === R√âV√âLATION FINALE ===

SCENE truth_revealed {
    FADE_TO_BLACK
    
    SHOW_TEXT_CENTERED "LA V√âRIT√â"
    WAIT(3)
    
    SHOW_TEXT [
        "McKinsey n'√©tait pas le mal.",
        "C'√©tait une tentative de pr√©server l'humanit√©.",
        "Qui s'est transform√©e en protocole d'effacement.",
        "",
        "Marie n'√©tait pas une victime.",
        "C'√©tait une h√©ro√Øne qui a choisi de devenir archive.",
        "Pour sauver les souvenirs de ceux qui allaient mourir.",
        "",
        "Memento n'est pas une mal√©diction.",
        "C'est le plus grand acte d'amour.",
        "Devenir le gardien √©ternel des oubli√©s.",
        "",
        "En 2031, ce n'est pas l'apocalypse qui arrive.",
        "C'est le moment o√π l'humanit√© doit choisir :",
        "Oublier et vivre, ou se souvenir et transcender.",
        "",
        "Le choix appartient √† chaque joueur."
    ]
    
    FADE_IN
}

# Message syst√®me final
ON_SCENARIO_COMPLETE {
    SAY SYSTEM "F√©licitations. Vous avez d√©couvert l'origine de Memento."
    SAY SYSTEM "Marie Dubois, 1948-1971, transform√©e en Archive Vivante."
    SAY SYSTEM "Premi√®re et plus grande gardienne des souvenirs perdus."
    
    UNLOCK_ACHIEVEMENT("TRUTH_SEEKER")
    UNLOCK_ACHIEVEMENT("MARIE_REMEMBERED")
    
    IF ENDING == "SYNTHESIS_ACHIEVED" THEN
        UNLOCK_CHARACTER("marie_memento_unified")
        UNLOCK_ABILITY("protocol_mastery")
        SAY SYSTEM "Vous avez d√©bloqu√© : Marie-Memento Unifi√©e"
    END_IF
    
    # Mise √† jour du dossier conspiration
    UPDATE_FILE("MEMENTO/CONSPIRATION_DOSSIERS/MEMENTO_ARCHIVISTE/conclusion_personnelle.md")
}

# FIN
# "Je m'appelais Marie. J'ai choisi d'√™tre Memento. C'est mon histoire." 