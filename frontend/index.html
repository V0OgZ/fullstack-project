<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heroes of Time - Temporal Engine</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive-1280x800.css">
    <link rel="stylesheet" href="layout-fix.css">
    <link rel="stylesheet" href="temporal-styles.css">
    <link rel="stylesheet" href="translation-styles.css">
    <link rel="stylesheet" href="styles/city.css">
    <link rel="stylesheet" href="styles/combat.css">
    <link rel="stylesheet" href="styles/hero.css">
    <link rel="stylesheet" href="styles/dicebear.css">
    <link rel="stylesheet" href="styles/scenario-selector.css">
    <link rel="stylesheet" href="event-log-styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="title">🕰️ Heroes of Time - Temporal Engine</div>
            <div class="controls">
                <button id="new-game-btn" class="btn-primary">🎮 New Game</button>
                <button id="city-btn" class="btn-primary">🏛️ Ville</button>
                <button id="combat-btn" class="btn-primary">⚔️ Combat</button>
                <button id="hero-btn" class="btn-primary">👤 Héros</button>
                <button id="joint-magic-btn" class="btn-warning">🚬 Joint Magique</button>
                <button id="scenario-btn" class="btn-primary">📋 Scénarios</button>
                <button id="grofi-heroes-btn" class="btn-primary">🌟 Héros GROFI</button>
                <button id="add-ragnar-btn" class="btn-secondary">🛡️ Add Ragnar</button>
                <button id="test-decay-btn" class="btn-warning">⏰ Test Decay</button>
                <button id="dicebear-gallery-btn" class="btn-info">🦸 Héros Gallery</button>
                <button id="settings-btn" class="btn-icon">⚙️</button>
                
                <!-- 🌫️ ZFC CONTROLS IN HEADER -->
                <div id="fog-controls-header"></div>
            </div>
        </header>
        
        <div class="game-area">
            <div class="game-board">
                <canvas id="game-canvas"></canvas>
                <div class="game-overlay">
                    <div class="temporal-info" id="temporal-info">
                        <div class="info-card">
                            <h3>⏰ Temporal Status</h3>
                            <div id="current-timeline">Timeline: ℬ1</div>
                            <div id="current-turn">Turn: 0</div>
                            <div id="decay-status">Decay: None</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="side-panel">
                <!-- 🎮 Contrôles Principaux -->
                <div class="main-controls">
                    <div class="control-section">
                        <h3>🎮 Contrôles Principaux</h3>
                        <div class="control-buttons">
                            <button id="hero-select-btn" class="btn-control">👁️ Sélectionner Héros</button>
                            <button id="move-btn" class="btn-control">🚶 Déplacer</button>
                            <button id="attack-btn" class="btn-control">⚔️ Attaquer</button>
                            <button id="explore-btn" class="btn-control">🗺️ Explorer</button>
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h3>🔮 Actions Temporelles</h3>
                        <div class="control-buttons">
                            <button id="psi-create-btn" class="btn-control">ψ Créer État</button>
                            <button id="psi-collapse-btn" class="btn-control">† Effondrer</button>
                            <button id="timeline-switch-btn" class="btn-control">🔄 Changer Timeline</button>
                        </div>
                    </div>
                </div>
                
                <div class="script-console" id="script-console">
                    <!-- Console will be populated by JavaScript -->
                </div>
                
                <div class="hero-panel" id="hero-panel">
                    <h3>🦸 Heroes</h3>
                    <div id="heroes-list"></div>
                </div>
                
                <div class="psi-panel" id="psi-panel">
                    <h3>🔮 États ψ</h3>
                    <div id="psi-states-list"></div>
                </div>
            </div>
        </div>
        
        <div class="status-bar" id="status-bar">
            ⚡ HEROES OF TIME ENGINE - Initializing temporal systems...
        </div>
        
        <!-- 🎮 Bouton d'ouverture du sélecteur de scénarios -->
        <button id="open-scenario-selector-btn" class="scenario-selector-btn">
            🎮 Scénarios
        </button>

        <!-- Dicebear Gallery Modal -->
        <div id="dicebear-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>🎭 Dicebear Graphics Gallery</h2>
                    <span class="close" id="close-modal">&times;</span>
                </div>
                <div class="modal-body">
                    <div id="dicebear-gallery"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="api.js"></script>
    <script src="translation-service.js"></script>
    <script src="components/CityInterface.js"></script>
    <script src="components/CombatInterface.js"></script>
    <script src="components/HeroInterface.js"></script>
    <script src="script-console.js"></script>
    <script src="game.js"></script>
    <script src="runic-forge.js"></script>
    <script src="temporal-integration.js"></script>
    <script src="hero-avatars.js"></script>
    <script src="scenario-selector.js"></script>
    <script src="gameplay-enhancement.js"></script>
    <script src="missing-assets-loader.js"></script>
    <script src="gameplay-construction.js"></script>
    <script src="fog-of-war-system.js"></script>
    <script src="runic-symbols-port8000.js"></script>
    <script src="conflict-detection-fusion.js"></script>
    <script src="websocket-handler-zfc.js"></script>
    <script src="trinity-cosmique-service.js"></script>
    <script src="timeline-transparency-manager.js"></script>
    <script src="coordinate-fix.js"></script>
    <script src="ui-emergency-fix.js"></script>
    <script src="canvas-hero-renderer.js"></script>
    <script src="json-icon-system.js"></script>
    <script src="timeline-diodes-system.js"></script>
    <script src="system-messages.js"></script>
    <script src="contextual-hero-actions.js"></script>
    <script>
        // Initialize the comprehensive dicebar graphics system
        // JSON Icon System loaded automatically
        
        // 🌫️ Initialiser le système de brouillard de causalité
        window.fogOfWarSystem = new FogOfWarSystem();
        const fogControlsContainer = document.getElementById('fog-controls-header');
        if (fogControlsContainer) {
            fogControlsContainer.appendChild(window.fogOfWarSystem.createFogControls());
        }
        
        // 🏛️ Événements pour l'interface de ville
        document.getElementById('city-btn').addEventListener('click', () => {
            window.cityInterface.toggle();
        });
        
        // ⚔️ Événements pour l'interface de combat
        document.getElementById('combat-btn').addEventListener('click', () => {
            window.combatInterface.toggle();
        });
        
        // 👤 Événements pour l'interface de héros
        document.getElementById('hero-btn').addEventListener('click', () => {
            window.heroInterface.toggle();
        });
        
        // 🚬 Événements pour le Joint Magique
        document.getElementById('joint-magic-btn').addEventListener('click', () => {
            window.open('frontend/joint-panopticon-interface.html', '_blank', 'width=1200,height=800');
        });
        
        // 📋 Événements pour le sélecteur de scénarios
        document.getElementById('scenario-btn').addEventListener('click', () => {
            if (window.scenarioSelector) {
                window.scenarioSelector.show();
            }
        });
        
        // 🌐 Initialiser le service de traduction
        window.translationService = new TranslationService();
        
        // 🎮 Initialiser l'API de jeu
        window.gameAPI = new GameAPI();
        
        // 🏛️ Initialiser l'interface de ville
        window.cityInterface = new CityInterface();
        
        // ⚔️ Initialiser l'interface de combat
        window.combatInterface = new CombatInterface();
        
        // 👤 Initialiser l'interface de héros
        window.heroInterface = new HeroInterface();
        
        // 🎮 Initialiser le sélecteur de scénarios
        window.scenarioSelector = new ScenarioSelector();
        const openScenarioBtn = document.getElementById('open-scenario-selector-btn');
        if (openScenarioBtn) {
            openScenarioBtn.addEventListener('click', () => {
                window.scenarioSelector.show();
            });
        }
        
        // Initialize game components
        let gameRenderer;
        let gameState = {
            heroes: [],
            creatures: [],
            artifacts: [],
            currentTimeline: 'ℬ1',
            currentTurn: 0,
            decayStatus: 'None'
        };

        // Mock heroes with dicebar graphics
        window.createMockHeroes = function() {
            const mockHeroes = [
                {
                    name: 'Ragnar',
                    health: 120,
                    maxHealth: 120,
                    temporalEnergy: 80,
                    movementPoints: 3,
                    timeline: 'ℬ1',
                    position: { q: 0, r: 0 }
                },
                {
                    name: 'Arthur',
                    health: 100,
                    maxHealth: 100,
                    temporalEnergy: 60,
                    movementPoints: 2,
                    timeline: 'ℬ1',
                    position: { q: 1, r: -1 }
                },
                {
                    name: 'Jean-Grofignon',
                    health: 80,
                    maxHealth: 80,
                    temporalEnergy: 120,
                    movementPoints: 2,
                    timeline: 'ℬ1',
                    position: { q: -1, r: 1 }
                }
            ];
            
            gameState.heroes = mockHeroes;
            window.updateHeroesList(mockHeroes);
            window.updateStatusBar('Demo Heroes: Ragnar 🛡️, Arthur ⚔️, and Jean-Grofignon 🧠 ready with Dicebear graphics!');
        };

        // Enhanced heroes list with dicebar graphics
        window.updateHeroesList = function(heroes) {
            const heroesList = document.getElementById('heroes-list');
            if (!heroesList) return;
            
            heroesList.innerHTML = '';
            heroes.forEach(hero => {
                const heroElement = document.createElement('div');
                heroElement.className = 'hero-item enhanced-hero-item';
                
                // Create dicebar avatar for the hero
                const avatarElement = dicebarSystem.createAvatarElement('hero', hero.name, 50);
                
                heroElement.innerHTML = `
                    <div class="hero-header">
                        <div class="hero-avatar-container"></div>
                        <div class="hero-info">
                            <div class="hero-name">${hero.name}</div>
                            <div class="hero-stats">
                                <span class="health">❤️ ${hero.health}/${hero.maxHealth}</span>
                                <span class="energy">⚡ ${hero.temporalEnergy}</span>
                                <span class="movement">👟 ${hero.movementPoints}</span>
                            </div>
                        </div>
                    </div>
                    <div class="hero-timeline">⏰ ${hero.timeline}</div>
                `;
                
                // Insert the dicebar avatar
                const avatarContainer = heroElement.querySelector('.hero-avatar-container');
                avatarContainer.appendChild(avatarElement);
                
                heroesList.appendChild(heroElement);
            });
        };

        // Dicebear Gallery functionality
        document.getElementById('dicebear-gallery-btn').addEventListener('click', function() {
            const modal = document.getElementById('dicebear-modal');
            modal.style.display = 'block';
            
            // Create the gallery
            window.jsonIconSystem.createSimpleGallery('dicebear-gallery');
        });

        document.getElementById('close-modal').addEventListener('click', function() {
            document.getElementById('dicebear-modal').style.display = 'none';
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('dicebear-modal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize canvas renderer
            gameRenderer = new GameRenderer('game-canvas');
            
            // Initialize script console
            if (typeof ScriptConsole !== 'undefined') {
                window.scriptConsole = new ScriptConsole('script-console');
                window.scriptConsole.addToOutput('🕰️ Heroes of Time - Temporal Engine with Enhanced Dicebear Graphics', 'success');
                window.scriptConsole.addToOutput('Available commands:', 'normal');
                window.scriptConsole.addToOutput('  • HERO(Ragnar) - Create hero with dicebear avatar', 'normal');
                window.scriptConsole.addToOutput('  • MOV(Ragnar, @5,3) - Move hero', 'normal');
                window.scriptConsole.addToOutput('  • CREATURE(Dragon Rouge Temporel) - Summon creature with graphics', 'normal');
                window.scriptConsole.addToOutput('  • ARTIFACT(avantworld_blade) - Create artifact with graphics', 'normal');
                window.scriptConsole.addToOutput('🎭 Click "Dicebear Gallery" to see all available graphics!', 'info');
            }

            // Load demo heroes with dicebar graphics
            setTimeout(() => {
                window.scriptConsole.addToOutput('🎭 Loading heroes with dicebear graphics for immediate testing...', 'info');
                window.createMockHeroes();
            }, 1000);

            // Initialize other game systems
            if (typeof initializeGameSystems === 'function') {
                initializeGameSystems();
            }
        });

        // Enhanced button handlers with dicebar integration
        document.getElementById('new-game-btn').addEventListener('click', async function() {
            try {
                const result = await window.gameAPI.newGame();
                window.scriptConsole.addToOutput('🎮 New game started with dicebear graphics!', 'success');
                window.createMockHeroes(); // Load heroes with graphics
            } catch (error) {
                window.scriptConsole.addToOutput('⚠️ Backend not available, using demo mode with graphics', 'warning');
                window.createMockHeroes();
            }
        });

        document.getElementById('add-ragnar-btn').addEventListener('click', async function() {
            try {
                const result = await window.gameAPI.executeScript('HERO(Ragnar)');
                window.scriptConsole.addToOutput('🛡️ Hero Ragnar created with dicebear graphics via temporal script!', 'success');
                window.updateHeroesList(result.heroes || []);
            } catch (error) {
                window.scriptConsole.addToOutput('⚠️ Backend not available for script execution', 'warning');
                window.scriptConsole.addToOutput('🎭 Loading demo heroes with graphics instead...', 'info');
                window.createMockHeroes();
            }
        });

        document.getElementById('grofi-heroes-btn').addEventListener('click', async function() {
            try {
                // Créer les héros GROFI légendaires
                const grofiHeroes = [
                    'HERO(Jean-Grofignon)',
                    'HERO(Walter Sobchak)', 
                    'HERO(The Dude)',
                    'HERO(Vince Vega)',
                    'HERO(Anna Martel)'
                ];
                
                for (const heroScript of grofiHeroes) {
                    const result = await window.gameAPI.executeScript(heroScript);
                    window.scriptConsole.addToOutput(`🌟 ${heroScript} - Héros GROFI créé!`, 'success');
                }
                
                window.scriptConsole.addToOutput('🌟 Tous les Compagnons GROFI sont maintenant disponibles!', 'success');
                window.scriptConsole.addToOutput('🎭 Utilisez MOV(), CAST(), USE() avec ces héros légendaires', 'info');
                
            } catch (error) {
                window.scriptConsole.addToOutput('⚠️ Backend not available, création des héros GROFI en mode démo', 'warning');
                window.scriptConsole.addToOutput('🌟 Jean-Grofignon, Walter Sobchak, The Dude, Vince Vega créés!', 'success');
                window.createMockHeroes();
            }
        });

        document.getElementById('test-decay-btn').addEventListener('click', async function() {
            try {
                const result = await window.gameAPI.testDecay();
                window.scriptConsole.addToOutput('⏰ Temporal decay test executed', 'success');
                if (result.decayStatus) {
                    document.getElementById('decay-status').textContent = `Decay: ${result.decayStatus}`;
                }
            } catch (error) {
                window.scriptConsole.addToOutput('⚠️ Backend not available for decay testing', 'warning');
                document.getElementById('decay-status').textContent = 'Decay: Demo Mode';
            }
        });

        // Status bar update function
        window.updateStatusBar = function(message) {
            if (window.scriptConsole) {
                window.scriptConsole.addToOutput(message, 'info');
            }
        };

        // Global game state access
        window.getGameState = function() {
            return gameState;
        };

        window.updateGameState = function(newState) {
            gameState = { ...gameState, ...newState };
            if (gameRenderer) {
                gameRenderer.updateGameState(gameState);
            }
        };

        // Export dicebar system for global access
        window.dicebarSystem = dicebarSystem;
        
        // ✨ AUTO-DEMO DETECTION & REPLAY SYSTEM ✨
        // =======================================
        
        // Fonction pour détecter les paramètres URL
        function checkAutoDemo() {
            const urlParams = new URLSearchParams(window.location.search);
            const demoMode = urlParams.get('demo');
            const scenario = urlParams.get('scenario');
            
            if (demoMode === 'auto' && scenario === 'zfc') {
                console.log('🎮 AUTO-DEMO ZFC DÉTECTÉ - Lancement automatique...');
                window.updateStatusBar('🎮 AUTO-DEMO ZFC ACTIVÉ');
                setTimeout(startZFCAutoDemo, 2000); // Attendre 2 sec que tout soit chargé
            }
        }
        
        // Fonction pour lancer la démo ZFC automatique
        async function startZFCAutoDemo() {
            window.updateStatusBar('🚀 DÉMARRAGE DÉMO ZFC - Mode Auto-Replay');
            
            // Créer les héros GROFI pour la démo - POSITIONS CENTRÉES
            const demoHeroes = [
                { name: 'Arthur', icon: '👑', x: 250, y: 200, color: '#4ECDC4' },
                { name: 'Morgana', icon: '🧙‍♀️', x: 350, y: 180, color: '#FF6B6B' },
                { name: 'Lysandrel', icon: '🧝‍♂️', x: 300, y: 250, color: '#45B7D1' },
                { name: 'Ragnar', icon: '🛡️', x: 200, y: 220, color: '#FFA726' }
            ];
            
            // Ajouter les héros à la map
            demoHeroes.forEach(hero => {
                createHeroOnMap(hero);
            });
            
            window.updateStatusBar('👥 4 héros créés pour la démo ZFC');
            
            // Lancer les phases avec bulles de dialogue
            setTimeout(() => startZFCPhases(demoHeroes), 1000);
        }
        
        // Créer un héros sur la map avec icône
        function createHeroOnMap(hero) {
            const canvas = document.getElementById('game-canvas');
            const rect = canvas.getBoundingClientRect();
            
            // Créer l'élément héros
            const heroElement = document.createElement('div');
            heroElement.className = 'demo-hero';
            heroElement.id = `hero-${hero.name}`;
            heroElement.innerHTML = `
                <div class="hero-icon">${hero.icon}</div>
                <div class="hero-name">${hero.name}</div>
            `;
            
            heroElement.style.cssText = `
                position: absolute;
                left: ${hero.x}px;
                top: ${hero.y}px;
                text-align: center;
                color: ${hero.color};
                font-weight: bold;
                font-size: 12px;
                z-index: 100;
                transition: all 0.5s ease-in-out;
                cursor: pointer;
            `;
            
            // Ajouter au game-overlay
            const gameOverlay = document.querySelector('.game-overlay');
            gameOverlay.appendChild(heroElement);
            
            // Animation d'apparition
            setTimeout(() => {
                heroElement.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    heroElement.style.transform = 'scale(1)';
                }, 200);
            }, 100);
        }
        
        // Créer une bulle de dialogue au-dessus d'un héros
        function showDialogueBubble(heroName, message, duration = 3000) {
            const heroElement = document.getElementById(`hero-${heroName}`);
            if (!heroElement) return;
            
            // Créer la bulle
            const bubble = document.createElement('div');
            bubble.className = 'dialogue-bubble';
            bubble.innerHTML = message;
            
            bubble.style.cssText = `
                position: absolute;
                bottom: 100%;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 8px 12px;
                border-radius: 12px;
                font-size: 11px;
                white-space: nowrap;
                box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                border: 1px solid #4ECDC4;
                z-index: 200;
                opacity: 0;
                animation: bubbleAppear 0.3s ease-out forwards;
            `;
            
            // Ajouter l'animation CSS
            if (!document.getElementById('bubble-animations')) {
                const style = document.createElement('style');
                style.id = 'bubble-animations';
                style.textContent = `
                    @keyframes bubbleAppear {
                        from { opacity: 0; transform: translateX(-50%) translateY(10px); }
                        to { opacity: 1; transform: translateX(-50%) translateY(-5px); }
                    }
                    @keyframes bubbleDisappear {
                        from { opacity: 1; transform: translateX(-50%) translateY(-5px); }
                        to { opacity: 0; transform: translateX(-50%) translateY(-15px); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            heroElement.appendChild(bubble);
            
            // Supprimer après durée
            setTimeout(() => {
                bubble.style.animation = 'bubbleDisappear 0.3s ease-out forwards';
                setTimeout(() => {
                    if (bubble.parentNode) {
                        bubble.parentNode.removeChild(bubble);
                    }
                }, 300);
            }, duration);
        }
        
        // Déplacer un héros sur la map
        function moveHero(heroName, newX, newY) {
            const heroElement = document.getElementById(`hero-${heroName}`);
            if (!heroElement) return;
            
            heroElement.style.left = newX + 'px';
            heroElement.style.top = newY + 'px';
        }
        
        // Lancer les phases ZFC avec animations et bulles
        async function startZFCPhases(heroes) {
            // PHASE 1: Actions simultanées
            window.updateStatusBar('⚡ PHASE 1: Actions simultanées - 4 zones ZFC');
            
            showDialogueBubble('Arthur', '⚔️ "Je lance Excalibur Strike!"');
            showDialogueBubble('Morgana', '🔮 "Invocation du Dragon Noir!"');
            showDialogueBubble('Lysandrel', '🏹 "Tir de Précision Elfique!"');
            showDialogueBubble('Ragnar', '🛡️ "Charge de Berserker!"');
            
            // Bouger les héros
            setTimeout(() => {
                moveHero('Arthur', 150, 120);
                moveHero('Morgana', 350, 140);
                moveHero('Lysandrel', 250, 170);
                moveHero('Ragnar', 450, 150);
            }, 1000);
            
            await new Promise(resolve => setTimeout(resolve, 4000));
            
            // PHASE 2: Résolution des conflits
            window.updateStatusBar('🏛️ PHASE 2: Trinité Cosmique résout les conflits');
            
            showDialogueBubble('Arthur', '🤔 "Collision détectée avec Morgana..."');
            showDialogueBubble('Morgana', '💀 "Memento analyse... Duel à mort!"');
            
            await new Promise(resolve => setTimeout(resolve, 3500));
            
            // PHASE 3: Shadow Actions
            window.updateStatusBar('👻 PHASE 3: Prédictions Shadow Actions - 94.3% précision');
            
            showDialogueBubble('Lysandrel', '👻 "Je vois 3 futurs possibles..."');
            showDialogueBubble('Ragnar', '⚡ "Action fantôme: Coup Critique!"');
            
            // Créer des effets visuels (ombres)
            heroes.forEach(hero => {
                const shadowHero = document.getElementById(`hero-${hero.name}`).cloneNode(true);
                shadowHero.id = `shadow-${hero.name}`;
                shadowHero.style.opacity = '0.3';
                shadowHero.style.filter = 'blur(1px)';
                shadowHero.style.zIndex = '50';
                document.querySelector('.game-overlay').appendChild(shadowHero);
                
                setTimeout(() => {
                    if (shadowHero.parentNode) shadowHero.parentNode.removeChild(shadowHero);
                }, 2500);
            });
            
            await new Promise(resolve => setTimeout(resolve, 4000));
            
            // PHASE 4: Pathfinding quantique
            window.updateStatusBar('🚀 PHASE 4: Pathfinding Q* - 36.5% succès Excalibur');
            
            showDialogueBubble('Arthur', '🌟 "Accès à Excalibur via T67!"');
            showDialogueBubble('Morgana', '🎯 "Calcul quantique... 36.5%"');
            
            // Animation de téléportation quantique
            setTimeout(() => {
                moveHero('Arthur', 300, 80);
                showDialogueBubble('Arthur', '⭐ "Téléportation quantique!"', 2000);
            }, 1500);
            
            await new Promise(resolve => setTimeout(resolve, 4000));
            
            // PHASE 5: Chaos maximal
            window.updateStatusBar('⚡ PHASE 5: Chaos maximal - 8 zones actives');
            
            showDialogueBubble('Morgana', '🔥 "CHAOS TEMPOREL MAXIMUM!"');
            showDialogueBubble('Lysandrel', '😵 "Trop de timelines simultanées!"');
            showDialogueBubble('Ragnar', '🤪 "Ma hache vibre dans 4 dimensions!"');
            showDialogueBubble('Arthur', '👑 "Je maintiens l\'ordre cosmique!"');
            
            // Mouvement chaotique final
            const chaosMovements = [
                () => moveHero('Morgana', 100, 50),
                () => moveHero('Lysandrel', 400, 220),  
                () => moveHero('Ragnar', 180, 180),
                () => moveHero('Arthur', 320, 160)
            ];
            
            chaosMovements.forEach((move, i) => {
                setTimeout(move, i * 500);
            });
            
            await new Promise(resolve => setTimeout(resolve, 5000));
            
            // RÉSULTATS FINAUX
            window.updateStatusBar('🏆 RÉSULTATS: Morgana 🥇 | Arthur 🥈 | Lysandrel 🥉 | Ragnar 🥴');
            
            showDialogueBubble('Morgana', '🏆 "Victoire! Je règne sur le chaos!"');
            showDialogueBubble('Arthur', '🥈 "Bien joué, Morgana..."');
            showDialogueBubble('Lysandrel', '🥉 "Prochaine fois je serai prêt!"');
            showDialogueBubble('Ragnar', '🥴 "Oùm est passée ma hache...?"');
            
            setTimeout(() => {
                window.updateStatusBar('✅ DÉMONSTRATION ZFC TERMINÉE - Performance: 73ms ZFC | 60 FPS');
            }, 3000);
        }
        
        // Lancer la vérification auto-demo au chargement
        setTimeout(checkAutoDemo, 500);
    </script>
    
    <!-- 🌟 SYSTÈME D'ÉVÉNEMENTS INTELLIGENT -->
    <script src="translation-service.js"></script>
    <script src="event-log-system.js"></script>
    <script src="game-event-integration.js"></script>
    <script src="demo-event-system.js"></script>
    
    <!-- 🎨 FORD'S STYLUS OF REALITY - ARTISTIC MESSAGE SYSTEM ✨ -->
    <script src="artistic-message-system.js"></script>
    
    <!-- 🌀⚡ MATRIX ARCHITECT FUSION - SUPER SAIYAN SYSTEM ⚡🌀 -->
    <script src="matrix-architect-fusion.js"></script>
    
    <!-- 🌀⚡ THE SOURCE SYSTEM - ULTIMATE REALITY CONTROL ⚡🌀 -->
    <script src="the-source-system.js"></script>
    
    <!-- 🌀⚡ ZFC COMPLETE SYSTEM - FINAL ENGINE ⚡🌀 -->
    <!-- <script src="zfc-complete-system.js"></script> DÉSACTIVÉ - Interface trop intrusive -->
</body>
</html>