<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heroes of Time - Temporal Engine</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="temporal-styles.css">
    <link rel="stylesheet" href="translation-styles.css">
    <link rel="stylesheet" href="styles/city.css">
    <link rel="stylesheet" href="styles/combat.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="title">ğŸ•°ï¸ Heroes of Time - Temporal Engine</div>
            <div class="controls">
                <button id="new-game-btn" class="btn-primary">ğŸ® New Game</button>
                <button id="city-btn" class="btn-primary">ğŸ›ï¸ Ville</button>
                <button id="combat-btn" class="btn-primary">âš”ï¸ Combat</button>
                <button id="add-ragnar-btn" class="btn-secondary">ğŸ›¡ï¸ Add Ragnar</button>
                <button id="test-decay-btn" class="btn-warning">â° Test Decay</button>
                <button id="settings-btn" class="btn-icon">âš™ï¸</button>
            </div>
        </header>
        
        <div class="game-area">
            <div class="game-board">
                <canvas id="game-canvas"></canvas>
                <div class="game-overlay">
                    <div class="temporal-info" id="temporal-info">
                        <div class="info-card">
                            <h3>â° Temporal Status</h3>
                            <div id="current-timeline">Timeline: â„¬1</div>
                            <div id="current-turn">Turn: 0</div>
                            <div id="decay-status">Decay: None</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="side-panel">
                <!-- ğŸŒ«ï¸ Brouillard de CausalitÃ© -->
                <div id="fog-controls-container"></div>
                
                <!-- ğŸ® ContrÃ´les Principaux -->
                <div class="main-controls">
                    <div class="control-section">
                        <h3>ğŸ® ContrÃ´les Principaux</h3>
                        <div class="control-buttons">
                            <button id="hero-select-btn" class="btn-control">ğŸ‘ï¸ SÃ©lectionner HÃ©ros</button>
                            <button id="move-btn" class="btn-control">ğŸš¶ DÃ©placer</button>
                            <button id="attack-btn" class="btn-control">âš”ï¸ Attaquer</button>
                            <button id="explore-btn" class="btn-control">ğŸ—ºï¸ Explorer</button>
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h3>ğŸ”® Actions Temporelles</h3>
                        <div class="control-buttons">
                            <button id="psi-create-btn" class="btn-control">Ïˆ CrÃ©er Ã‰tat</button>
                            <button id="psi-collapse-btn" class="btn-control">â€  Effondrer</button>
                            <button id="timeline-switch-btn" class="btn-control">ğŸ”„ Changer Timeline</button>
                        </div>
                    </div>
                </div>
                
                <div class="script-console" id="script-console">
                    <!-- Console will be populated by JavaScript -->
                </div>
                
                <div class="hero-panel" id="hero-panel">
                    <h3>ğŸ¦¸ Heroes</h3>
                    <div id="heroes-list"></div>
                </div>
                
                <div class="psi-panel" id="psi-panel">
                    <h3>ğŸ”® Ã‰tats Ïˆ</h3>
                    <div id="psi-states-list"></div>
                </div>
                
                <div class="decay-panel" id="decay-panel">
                    <h3>ğŸ­ Anna's Decay System</h3>
                    <div class="decay-controls">
                        <button id="apply-decay-btn" class="btn-warning">Apply Decay</button>
                        <button id="repair-buildings-btn" class="btn-success">Repair Buildings</button>
                    </div>
                    <div id="decay-stats"></div>
                </div>
            </div>
        </div>
        
        <div class="status-bar" id="status-bar">
            Ready to start... Anna the Martopicker watches from the shadows â°
        </div>
        
        <!-- ğŸ® Bouton d'ouverture du sÃ©lecteur de scÃ©narios -->
        <button id="open-scenario-selector-btn" class="scenario-selector-btn">
            ğŸ® ScÃ©narios
        </button>
    </div>
    
    <script src="api.js"></script>
    <script src="translation-service.js"></script>
    <script src="components/CityInterface.js"></script>
    <script src="components/CombatInterface.js"></script>
    <script src="script-console.js"></script>
    <script src="game.js"></script>
    <script src="runic-forge.js"></script>
    <script src="temporal-integration.js"></script>
    <script src="hero-avatars.js"></script>
    <script src="scenario-selector.js"></script>
    <script src="gameplay-enhancement.js"></script>
    <script src="missing-assets-loader.js"></script>
    <script src="gameplay-construction.js"></script>
    <script src="fog-of-war-system.js"></script>
    <script>
        // Initialisation de l'application
        window.gameAPI = new GameAPI();
        window.gameRenderer = new GameRenderer('game-canvas');
        window.scriptConsole = new ScriptConsole('script-console');
        window.temporalIntegration = new TemporalIntegration();
        window.gameplayEnhancement = new GameplayEnhancement();
        window.missingAssetsLoader = new MissingAssetsLoader();
        window.gameplayConstruction = new GameplayConstruction();
        
        // ğŸŒ«ï¸ Initialiser le systÃ¨me de brouillard de causalitÃ©
        window.fogOfWarSystem = new FogOfWarSystem();
        const fogControlsContainer = document.getElementById('fog-controls-container');
        if (fogControlsContainer) {
            fogControlsContainer.appendChild(window.fogOfWarSystem.createFogControls());
        }
        
        // ğŸ›ï¸ Ã‰vÃ©nements pour l'interface de ville
        document.getElementById('city-btn').addEventListener('click', () => {
            window.cityInterface.toggle();
        });
        
        // âš”ï¸ Ã‰vÃ©nements pour l'interface de combat
        document.getElementById('combat-btn').addEventListener('click', () => {
            window.combatInterface.toggle();
        });
        
        // ğŸŒ Initialiser le service de traduction
        window.translationService = new TranslationService();
        
        // ğŸ›ï¸ Initialiser l'interface de ville
        window.cityInterface = new CityInterface();
        
        // âš”ï¸ Initialiser l'interface de combat
        window.combatInterface = new CombatInterface();
        
        // ğŸ® Initialiser le sÃ©lecteur de scÃ©narios
        window.scenarioSelector = new ScenarioSelector();
        const openScenarioBtn = document.getElementById('open-scenario-selector-btn');
        if (openScenarioBtn) {
            openScenarioBtn.addEventListener('click', () => {
                const selectorInterface = window.scenarioSelector.createSelectorInterface();
                document.body.appendChild(selectorInterface);
            });
        }
        
        // Fonction pour mettre Ã  jour la barre de statut
        window.updateStatusBar = function(message) {
            const statusBar = document.getElementById('status-bar');
            if (statusBar) {
                statusBar.textContent = message;
            }
        };
        
        // Initialisation au chargement
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ® Heroes of Time - Interface principale chargÃ©e');
            window.updateStatusBar('Interface prÃªte - Cliquez "New Game" pour commencer');
        });
    </script>
</body>
</html>