#!/bin/bash

# ğŸ® HOTS MENU SIMPLE - FlÃ¨ches + Lettres + Espace
# Navigation: FlÃ¨ches â†‘â†“ + Lettres + ESPACE pour valider

show_main_menu() {
    clear
    echo "ğŸ® HEROES OF TIME"
    echo "================"
    echo ""
    echo "ğŸ“‚ CATÃ‰GORIES:"
    echo ""
    echo "  S - ğŸ”§ SYSTÃˆME"
    echo "  T - ğŸ§ª TESTS" 
    echo "  D - ğŸ® DÃ‰MOS"
    echo "  I - ğŸŒ INTERFACES"
    echo "  U - ğŸ› ï¸  UTILS"
    echo ""
    echo "  Q - âŒ QUITTER"
    echo ""
}

show_system_menu() {
    clear
    echo "ğŸ”§ SYSTÃˆME"
    echo "=========="
    echo ""
    echo "  S - ğŸš€ START"
    echo "  T - ğŸ“Š STATUS"
    echo "  P - â›” STOP"
    echo "  R - ğŸ”„ RESTART"
    echo "  L - ğŸ“‹ LOGS"
    echo ""
    echo "  B - â¬…ï¸  RETOUR"
    echo ""
}

show_tests_menu() {
    clear
    echo "ğŸ§ª TESTS"
    echo "========"
    echo ""
    echo "  Q - âš¡ QUICK"
    echo "  C - ğŸ† COMPLET"
    echo "  D - ğŸ› DEBUG"
    echo "  B - ğŸ¯ BACKEND"
    echo "  U - ğŸ® UI"
    echo ""
    echo "  R - â¬…ï¸  RETOUR"
    echo ""
}

show_demos_menu() {
    clear
    echo "ğŸ® DÃ‰MOS"
    echo "========"
    echo ""
    echo "  S - ğŸ¬ SCENARIO"
    echo "  R - ğŸ“¹ REPLAY"
    echo "  B - âš”ï¸  BATAILLE"
    echo "  E - ğŸ—¡ï¸  EXCALIBUR"
    echo "  N - ğŸ‘‘ NOOB"
    echo ""
    echo "  Q - â¬…ï¸  RETOUR"
    echo ""
}

show_interfaces_menu() {
    clear
    echo "ğŸŒ INTERFACES"
    echo "============="
    echo ""
    echo "  W - ğŸŒ WEB"
    echo "  A - ğŸ® ADMIN"
    echo "  P - ğŸ›ï¸  PANOPTICON"
    echo "  M - ğŸ“š MEMENTO"
    echo "  T - ğŸ§ª TEST UIS"
    echo ""
    echo "  B - â¬…ï¸  RETOUR"
    echo ""
}

show_utils_menu() {
    clear
    echo "ğŸ› ï¸ UTILS"
    echo "========"
    echo ""
    echo "  G - ğŸ§  GENERATE"
    echo "  T - ğŸ“œ TRANSLATE"
    echo "  M - ğŸ—ºï¸  MAP"
    echo "  S - ğŸ’¾ SAVE"
    echo "  L - ğŸ“‚ LOAD"
    echo ""
    echo "  B - â¬…ï¸  RETOUR"
    echo ""
}

execute_command() {
    local category=$1
    local action=$2
    
    case "$category-$action" in
        "S-S") ./hots-full start ;;
        "S-T") ./hots-full status ;;
        "S-P") ./hots-full stop ;;
        "S-R") ./hots-full restart ;;
        "S-L") ./hots-full logs ;;
        
        "T-Q") ./hots-full test quick ;;
        "T-C") ./hots-full test final ;;
        "T-D") ./hots-full debug ;;
        "T-B") ./hots-full test backend ;;
        "T-U") ./hots-full test ui ;;
        
        "D-S") ./hots-full scenario ;;
        "D-R") ./hots-full replay center ;;
        "D-B") ./hots-full test bataille ;;
        "D-E") ./hots-full excalibur-vega ;;
        "D-N") ./hots-full demo noob ;;
        
        "I-W") ./hots-full web ;;
        "I-A") ./hots-full admin ;;
        "I-P") ./hots-full worldstate ;;
        "I-M") ./hots-full wake-memento ;;
        "I-T") ./hots-full test-uis ;;
        
        "U-G") ./hots-full generate ;;
        "U-T") ./hots-full translate ;;
        "U-M") ./hots-full map ;;
        "U-S") echo -n "Nom: "; read name; ./hots-full save "$name" ;;
        "U-L") echo -n "ID: "; read id; ./hots-full load "$id" ;;
        
        *) echo "âŒ Action inconnue" ;;
    esac
}

# BOUCLE PRINCIPALE
while true; do
    show_main_menu
    read -n1 choice
    
    case "$choice" in
        "S"|"s")
            while true; do
                show_system_menu
                read -n1 action
                [[ "$action" == "B" || "$action" == "b" ]] && break
                execute_command "S" "$action"
            done
            ;;
        "T"|"t")
            while true; do
                show_tests_menu
                read -n1 action
                [[ "$action" == "R" || "$action" == "r" ]] && break
                execute_command "T" "$action"
            done
            ;;
        "D"|"d")
            while true; do
                show_demos_menu
                read -n1 action
                [[ "$action" == "Q" || "$action" == "q" ]] && break
                execute_command "D" "$action"
            done
            ;;
        "I"|"i")
            while true; do
                show_interfaces_menu
                read -n1 action
                [[ "$action" == "B" || "$action" == "b" ]] && break
                execute_command "I" "$action"
            done
            ;;
        "U"|"u")
            while true; do
                show_utils_menu
                read -n1 action
                [[ "$action" == "B" || "$action" == "b" ]] && break
                execute_command "U" "$action"
            done
            ;;
        "Q"|"q")
            clear
            echo "ğŸ‘‹ Au revoir !"
            exit 0
            ;;
    esac
done 