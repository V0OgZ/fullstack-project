# CURSOR RULES - Heroes of Time Project

## ğŸš¨ RÃˆGLES CRITIQUES APPRISES AUJOURD'HUI

### Git - Commandes INTERDITES sur Agent PartagÃ©
- âŒ **JAMAIS** `git reset --hard` - Agent partagÃ©, plusieurs dÃ©veloppeurs
- âŒ **JAMAIS** `git push --force` - Destructif pour l'Ã©quipe  
- âŒ **JAMAIS** suppression de branches sans concertation
- âœ… **UTILISER** : `git checkout <commit> -- <fichier>` pour restaurer
- âœ… **UTILISER** : `git revert` pour annuler des commits
- âœ… **UTILISER** : `git stash` pour sauvegarder

### Serveurs Multiples - Gestion Ports DÃ‰FINITIVE
- Port 9000 : Dashboard UnifiÃ© (`dashboard.html`) - **PRINCIPAL**
- Port 8000 : Frontend Principal (`frontend/`) - Console temporelle + carte hex
- Port 8080 : Backend Spring Boot API (`backend/`) - **APIs REST**
- Port 5174 : Interface Temporelle (`frontend-temporal/`) - Configuration Temporelle
- Port 8001 : Quantum Visualizer (`quantum-visualizer/`) - ScÃ©narios GROFI
- Port 5175 : Object Viewer (`visualizer-server.py`) - JSON/HOTS/Dashboard
- Port 5170 : JSON Visualizer (DÃ‰PRÃ‰CIÃ‰ - remplacÃ© par 5175)
- Port 5171 : HOTS Visualizer (DÃ‰PRÃ‰CIÃ‰ - remplacÃ© par 5175)
- Port 8888 : Test Runner - **RÃ‰CUPÃ‰RÃ‰ et FONCTIONNEL**

### ğŸ“‹ COMMANDES STANDARDISÃ‰ES - OBLIGATOIRES
- âœ… **START ALL** : `./scripts/actifs/start-services-background.sh` - **PRINCIPAL**
- âœ… **STOP ALL** : `./scripts/actifs/stop-all-services.sh`
- âœ… **STATUS** : `lsof -i :9000,8000,8080,5174,8001,5175,8888 | grep LISTEN`
- âœ… **BACKEND START** : `cd backend && mvn spring-boot:run > /dev/null 2>&1 &`
- âœ… **QUICK TEST** : `./scripts/actifs/test-ui-quick.sh`
- âŒ **INTERDICTION** : RecrÃ©er des scripts ou commandes manuelles
- âŒ **INTERDICTION** : Changer les ports dÃ©finis ci-dessus
- ğŸ¯ **RÃˆGLE** : TOUJOURS utiliser les scripts existants dans `/scripts/actifs/`
- ğŸš¨ **PORTS FIXES** : Ne JAMAIS changer les ports sans concertation

### ğŸš¨ RÃˆGLE CRITIQUE : SERVICES EN ARRIÃˆRE-PLAN PERMANENT
- âŒ **JAMAIS** tuer les serveurs pendant le codage
- âŒ **JAMAIS** arrÃªter les UIs quand l'utilisateur teste
- âœ… **TOUJOURS** lancer avec `> /dev/null 2>&1 &` pour background permanent
- âœ… **LAISSER** les services actifs pour que l'utilisateur puisse tester
- âœ… **MAINTENIR** dashboard, JSON visualizer, HOTS visualizer actifs
- âœ… **COMMANDE TYPE** : `python3 -m http.server PORT > /dev/null 2>&1 &`
- ğŸ¯ **OBJECTIF** : L'utilisateur peut tester et jouer pendant que l'agent code

## ğŸ“ ORGANISATION COMPLÃˆTE DES FRONTENDS

### ğŸ® FRONTENDS ACTIFS VÃ‰RIFIÃ‰S
1. **`frontend/`** - Frontend Principal (port 8000)
   - Fichier : `index.html`
   - Features : Console temporelle + carte hexagonale
   - Commande : `cd frontend && python3 -m http.server 8000 > /dev/null 2>&1 &`

2. **`frontend-temporal/`** - Interface Temporelle (port 5174)
   - Fichier : `index.html` 
   - Features : Ã‰pÃ©e temporelle animÃ©e + Configuration Temporelle
   - Commande : `cd frontend-temporal && python3 -m http.server 5174 > /dev/null 2>&1 &`

3. **`quantum-visualizer/`** - Visualiseur Quantique (port 8001)
   - Fichier : `index.html`
   - Features : ScÃ©narios GROFI + Visualisation
   - Commande : `python3 -m http.server 8001 > /dev/null 2>&1 &` (depuis RACINE)
   - URL : http://localhost:8001/quantum-visualizer/

### ğŸ“Š FICHIERS DASHBOARD ET VISUALISEURS (RACINE)
- **`dashboard.html`** - Dashboard principal (port 9000) âœ… CORRIGÃ‰
- **`dashboard-unified.html`** - Version unifiÃ©e alternative
- **`dashboard-with-tests.html`** - Version avec tests
- **`json-visualizer.html`** - Visualiseur JSON standalone
- **`hots-visualizer.html`** - Visualiseur HOTS standalone  
- **`visualizer-server.py`** - Serveur multi-visualiseurs (port 5175)
- **`test-runner-interface.html`** - Interface Test Runner (port 8888)
- **`test-runner-server.py`** - Serveur Test Runner

### ğŸ¯ SERVICES ACTUELLEMENT ACTIFS (PERMANENT BACKGROUND)
- âœ… Dashboard (9000) : http://localhost:9000/dashboard.html
- âœ… Frontend (8000) : http://localhost:8000
- âœ… Backend API (8080) : http://localhost:8080/api/games
- âœ… Temporal UI (5174) : http://localhost:5174
- âœ… Quantum Visualizer (8001) : http://localhost:8001/quantum-visualizer/
- âœ… Object Viewer (5175) : http://localhost:5175
- âœ… Test Runner (8888) : http://localhost:8888

### Backend - ProblÃ¨mes Connus
- ğŸ”´ **Erreur JPA** : "Not a managed type: class Game"
- ğŸ”´ **ComplexAmplitude** : Existe mais problÃ¨me de dÃ©pendances Maven
- ğŸ”´ **DynamicFormulaParser** : MÃ©thode `executeFormula` manquante
- âœ… **Correction** : Utiliser `executeFormulaEffect(formula, hero, game, 0)`

### PROBLÃˆME CRITIQUE dquote> - SOLUTIONS
- ğŸ”´ **ProblÃ¨me** : Se produit avec echo + guillemets imbriquÃ©s, emojis, messages multi-lignes
- âœ… **SOLUTIONS** : 
  1. Ctrl+C pour sortir
  2. Toujours guillemets simples `echo 'message'`
  3. Git commit avec guillemets simples
  4. Fichiers temporaires pour longs messages
  5. Jamais d'emojis dans echo
- âœ… **PROCÃ‰DURE** : Nettoyer ports avec `lsof -ti:PORT | xargs kill -9` avant dÃ©marrage

### Commit Messages - Format Appris
- âœ… **Bon format** : "ğŸ¯ MISSION UI LÃ‰GENDAIRE ACCOMPLIE - Description dÃ©taillÃ©e"
- âœ… **Inclure** : Features, ports, sources git
- âœ… **Structurer** : Ã‰mojis + titre + dÃ©tails techniques 